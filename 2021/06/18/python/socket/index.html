
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />

    

    
    <title>socket | 春江花月夜o</title>
    
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="keywords" content="" />
    
    <meta name="description" content="Ip地址分类Ip地址由网络地址和主机地址组成分为5类：  1.A类IP地址一个A类IP地址由1字节的网络地址和3字节主机地址组成，网络地址的最高位必须是“0”（位运算）， 地址范围从1.0.0.0 到126.0.0.0。可用的A类网络有126个，每个网络能容纳1千多万个主机。  2.B类IP地址一个B类IP地址由2个字节的网络地址和2个字节的主机地址组成，网络地址的最高位必须是“10”，地址范围从">
<meta property="og:type" content="article">
<meta property="og:title" content="socket">
<meta property="og:url" content="http://example.com/2021/06/18/python/socket/index.html">
<meta property="og:site_name" content="春江花月夜o">
<meta property="og:description" content="Ip地址分类Ip地址由网络地址和主机地址组成分为5类：  1.A类IP地址一个A类IP地址由1字节的网络地址和3字节主机地址组成，网络地址的最高位必须是“0”（位运算）， 地址范围从1.0.0.0 到126.0.0.0。可用的A类网络有126个，每个网络能容纳1千多万个主机。  2.B类IP地址一个B类IP地址由2个字节的网络地址和2个字节的主机地址组成，网络地址的最高位必须是“10”，地址范围从">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://example.com/css/images/dangao.jpg">
<meta property="article:published_time" content="2021-06-18T01:03:51.525Z">
<meta property="article:modified_time" content="2021-06-16T06:52:30.697Z">
<meta property="article:author" content="durian">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/css/images/dangao.jpg">
    

    

    
        <link rel="icon" href="/css/images/gouzi.ico" />
    

    
<link rel="stylesheet" href="/libs/font-awesome/css/font-awesome.min.css">

    
<link rel="stylesheet" href="/libs/titillium-web/styles.css">

    
<link rel="stylesheet" href="/libs/source-code-pro/styles.css">


    
<link rel="stylesheet" href="/css/style.css">


    
<script src="/libs/jquery/3.5.0/jquery.min.js"></script>

    
    
        
<link rel="stylesheet" href="/libs/lightgallery/css/lightgallery.min.css">

    
    
        
<link rel="stylesheet" href="/libs/justified-gallery/justifiedGallery.min.css">

    
    
    
    


<meta name="generator" content="Hexo 5.2.0"><link rel="alternate" href="/atom.xml" title="春江花月夜o" type="application/atom+xml">
</head>

<body>
    <div id="wrap">
        <header id="header">
    <div id="header-outer" class="outer">
        <div class="container">
            <div class="container-inner">
                <div id="header-title">
                    <h1 class="logo-wrap">
                        <a href="/" class="logo"></a>
                    </h1>
                    
                </div>
                <div id="header-inner" class="nav-container">
                    <a id="main-nav-toggle" class="nav-icon fa fa-bars"></a>
                    <div class="nav-container-inner">
                        <ul id="main-nav">
                            
                                <li class="main-nav-list-item" >
                                    <a class="main-nav-list-link" href="/">主页</a>
                                </li>
                            
                                <li class="main-nav-list-item" >
                                    <a class="main-nav-list-link" href="/categories/python/">python</a>
                                </li>
                            
                                <li class="main-nav-list-item" >
                                    <a class="main-nav-list-link" href="/categories/cpp/">cpp</a>
                                </li>
                            
                                <li class="main-nav-list-item" >
                                    <a class="main-nav-list-link" href="/categories/webframe/">webframe</a>
                                </li>
                            
                                <li class="main-nav-list-item" >
                                    <a class="main-nav-list-link" href="/categories/bigdata/">bigdata</a>
                                </li>
                            
                                <li class="main-nav-list-item" >
                                    <a class="main-nav-list-link" href="/categories/nosql/">nosql</a>
                                </li>
                            
                        </ul>
                        <nav id="sub-nav">
                            <div id="search-form-wrap">

    <form class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="搜索" />
        <button type="submit" class="search-form-submit"></button>
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="想要查找什么..." />
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: '文章',
            PAGES: '页面',
            CATEGORIES: '分类',
            TAGS: '标签',
            UNTITLED: '(未命名)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>

<script src="/js/insight.js"></script>


</div>
                        </nav>
                    </div>
                </div>
            </div>
        </div>
    </div>
</header>

        <div class="container">
            <div class="main-body container-inner">
                <div class="main-body-inner">
                    <section id="main">
                        <div class="main-body-header">
    <h1 class="header">
    
    <a class="page-title-link" href="/categories/python/">python</a>
    </h1>
</div>

                        <div class="main-body-content">
                            <article id="post-python/socket" class="article article-single article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
            <header class="article-header">
                
    
        <h1 class="article-title" itemprop="name">
        socket
        </h1>
    

            </header>
        
        
            <div class="article-meta">
                
  <div class="article-date">
    <i class="fa fa-calendar"></i>
    <a href="/2021/06/18/python/socket/" class="article-date">
       <time datetime="2021-06-18T01:03:51.525Z" itemprop="datePublished">2021-06-18</time>
    </a>
  </div>


<div class="article-date">
  <i class="fa fa-calendar-plus-o"></i>
  <a href="/2021/06/18/python/socket/" class="article-date">
     <time datetime="2021-06-16T06:52:30.697Z" itemprop="dateModified">2021-06-16</time>
  </a>
</div>


                

                
                
   <div class="article-counter">
      <i class="fa fa-file-word-o"></i>
      <span class="post-count-item-text">本文字数: </span>
      <span class="post-count">4.2k</span>
      <i class="fa fa-clock-o"></i>
      <span class="post-time-item-text">阅读时长: </span>
      <span class="post-count">18 分钟 </span>
   </div>


                <span id="busuanzi_container_page_pv">
                阅读次数<span id="busuanzi_value_page_pv"></span>次
                </span>
            </div>
        
        
        <div class="article-entry" itemprop="articleBody">
            

            

            

            <h2 id="Ip地址分类"><a href="#Ip地址分类" class="headerlink" title="Ip地址分类"></a>Ip地址分类</h2><p>Ip地址由网络地址和主机地址组成分为5类：</p>
<ul>
<li><p>1.A类IP地址<br>一个A类IP地址由1字节的网络地址和3字节主机地址组成，<br>网络地址的最高位必须是“0”（位运算）， 地址范围从1.0.0.0 到126.0.0.0。<br>可用的A类网络有126个，每个网络能容纳1千多万个主机。</p>
</li>
<li><p>2.B类IP地址<br>一个B类IP地址由2个字节的网络地址和2个字节的主机地址组成，<br>网络地址的最高位必须是“10”，地址范围从128.0.0.0到191.255.255.255。<br>可用的B类网络有16382个，每个网络能容纳6万多个主机 。</p>
</li>
<li><p>3.C类IP地址<br>一个C类IP地址由3字节的网络地址和1字节的主机地址组成，网络地址的<br>最高位必须是“110”。范围从192.0.0.0到223.255.255.255。C类网络<br>可达209万余个，每个网络能容纳254个主机。</p>
</li>
<li><p>4.D类地址用于多点广播（Multicast）。<br>D类IP地址第一个字节以“lll0”开始，它是一个专门保留的地址。<br>它并不指向特定的网络，目前这一类地址被用在多点广播（Multicast）中。<br>多点广播地址用来一次寻址一组计算机，它标识共享同一协议的一组计算机。</p>
</li>
<li><p>5.E类IP地址<br>以“llll0”开始，为将来使用保留。<br>全零（“0．0．0．0”）地址对应于当前主机。全“1”的<br>IP地址（“255．255．255．255”）是当前子网的广播地址。<br>在IP地址3种主要类型里，各保留了3个区域作为私有地址，<br>其地址范围如下：<br>A类地址：10.0.0.0～10.255.255.255 </p>
</li>
</ul>
<h2 id="私有网络"><a href="#私有网络" class="headerlink" title="私有网络"></a>私有网络</h2><ul>
<li>iPv4地址枯竭为何还能支撑？<br>这就要说起NAT(Network Address Translation)网络地址转换技术<br>当我们在家或者在公司上网时，你的电脑肯定有一个类似192.168.0.1的地址，<br>这种地址属于私网地址，不属于公共互联网地址，每一个小的局域网都会使用<br>一个网段的私网地址，在与外界联系时变成公网，这样几十台上百台电脑只需<br>要一个公网地址。甚至还能私网套私网NAT套NAT一层一层，节约公网ip数量<br>但是NAT也有很多限制：私网访问公网虽然方便，但是公网访问私网就很困难，<br>很多服务受到限制，也影响了网络处理的效率。</li>
</ul>
<p><strong>具体百度iPv4和ipv6</strong></p>
<ul>
<li>私有ip<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">10.0.0.0 – 10.255.255.255</span><br><span class="line">172.16.0.0 – 172.31.255.255</span><br><span class="line">192.168.0.0 – 192.168.255.255</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h2 id="Port端口"><a href="#Port端口" class="headerlink" title="Port端口"></a>Port端口</h2><p>当你发送一段信息给别的电脑ip时，你这段信息主要是要访问别的电脑的哪个进程呢？如何确定是哪个进程呢？<br>当进程运行时，会告诉自身电脑给它的信息要从哪个端口传入，如：7788,7890等等</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Dest ip:192.168.1.2</span><br><span class="line">Src ip:192.168.1.3</span><br><span class="line">Dest port:7788</span><br><span class="line">Src port:4567</span><br><span class="line">Content:你好</span><br></pre></td></tr></table></figure>

<ul>
<li><p>端口号<br>0到2^16（65535）</p>
</li>
<li><p>知名端口号 不能随便用<br>0到1023<br>80端口分配给HTTP<br>21端口分配给FTP</p>
</li>
<li><p>大于1024随便用<br>动态端口 Dynamic ports<br>1024到65535</p>
</li>
</ul>
<h2 id="Socket简介"><a href="#Socket简介" class="headerlink" title="Socket简介"></a>Socket简介</h2><p>socket是网络通信的必须物，Socket是应用层<br>与TCP/IP协议族通信的中间软件抽象层，它是一组接口。<br>在设计模式中，Socket其实就是一个门面模式，它把复<br>杂的TCP/IP协议族隐藏在Socket接口后面，对用户来说，<br>一组简单的接口就是全部。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">import socket</span><br><span class="line"># ipv4协议 </span><br><span class="line">创建tcp连接</span><br><span class="line"># s &#x3D; socket.socket(socket.AF_INET, socket.SOCK_STREAM)</span><br><span class="line"># udp连接</span><br><span class="line">s &#x3D; socket.socket(socket.AF_INET, socket.SOCK_DGRAM)</span><br><span class="line"># 可以使用套接字收发数据</span><br><span class="line">#关闭套接字</span><br><span class="line">s.close()</span><br></pre></td></tr></table></figure>
<ul>
<li>ubuntu和windows通讯<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">vim缩进：shift V选择，v缩退 &gt;缩进</span><br><span class="line">ctrl n补全</span><br><span class="line">如果要实现ubuntu和我们windows的通讯</span><br><span class="line">如ip：172.154.2.12和192.168.33.23的通讯</span><br><span class="line">改成桥接模式，sudo dhclient等待分配ip</span><br><span class="line">然后ip会自动变为和另一个ip同一个网段</span><br><span class="line">ping 192.168.33.53</span><br><span class="line">10.167.2.111</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h2 id="socket简单使用"><a href="#socket简单使用" class="headerlink" title="socket简单使用"></a>socket简单使用</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">import socket</span><br><span class="line"># ipv4协议 </span><br><span class="line">创建tcp连接</span><br><span class="line"># s &#x3D; socket.socket(socket.AF_INET, socket.SOCK_STREAM)</span><br><span class="line"># udp连接</span><br><span class="line">s &#x3D; socket.socket(socket.AF_INET, socket.SOCK_DGRAM)</span><br><span class="line">while True:</span><br><span class="line">    # 键盘获取数据</span><br><span class="line">    data &#x3D; input(&quot;请输入你要发送的数据: &quot;)</span><br><span class="line">    if data &#x3D;&#x3D; &#39;exit&#39;:</span><br><span class="line">        break</span><br><span class="line">    # 可以使用套接字收发数据</span><br><span class="line">    s.sendto(data.encode(&#39;utf-8&#39;), (&#39;10.167.2.90&#39;, 8080))</span><br><span class="line">#关闭套接字</span><br><span class="line">s.close()</span><br></pre></td></tr></table></figure>

<ul>
<li><p>想要一个程序有一个固定的端口接收数据</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">from socket import *</span><br><span class="line">s &#x3D; socket(AF_INET, SOCK_DGRAM)</span><br><span class="line">local_addr &#x3D; (&#39;&#39;, 7788)</span><br><span class="line">s.bind(local_addr)</span><br><span class="line">recv_data &#x3D; s.recvfrom(1024)</span><br><span class="line">print(recv_data)</span><br><span class="line">print(recv_data[0].decode(&#39;utf-8&#39;))</span><br><span class="line">s.close()</span><br></pre></td></tr></table></figure>
</li>
<li><p>绑定发送数据端口<br>不绑定端口会随机端口分配！</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">s &#x3D; socket.socket(socket.AF_INET, socket.SOCK_DGRAM)</span><br><span class="line">s.bind((&#39;&#39;, 8080))</span><br></pre></td></tr></table></figure>



</li>
</ul>
<h2 id="udp聊天器"><a href="#udp聊天器" class="headerlink" title="udp聊天器"></a>udp聊天器</h2><ul>
<li>单工：收音机只能收不能发，只能单向</li>
<li>半双工：对讲机，我在收的时候发不了，发的时候收不了，同一时刻单向</li>
<li>全双工：手机，同一时刻既可以发，也可以收</li>
</ul>
<p>socket套接字是全双工 但现在没有多进程线程或协程的情况下，是半双工</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">import socket</span><br><span class="line">def send_msg(s):</span><br><span class="line">    &quot;&quot;&quot; 发送消息&quot;&quot;&quot;</span><br><span class="line">    dest_ip &#x3D; input(&#39;请输入对方的ip：&#39;)</span><br><span class="line">    dest_port &#x3D; int(input(&quot;请输入对方的port:&quot;))</span><br><span class="line">    send_data &#x3D; input(&quot;请输入要发送的消息：&quot;)</span><br><span class="line">    s.sendto(send_data.encode(&#39;utf-8&#39;), (dest_ip,dest_port ))</span><br><span class="line">    </span><br><span class="line">def recv_msg(s):</span><br><span class="line">    &quot;&quot;&quot; 接收数据&quot;&quot;&quot;</span><br><span class="line">     # 接收并显示</span><br><span class="line">    recv_data &#x3D; s.recv_from(1024)</span><br><span class="line">    print(&quot;%s : %s&quot; % (str(recv_data[1]), recv_data[0].decode(&#39;utf-8&#39;)</span><br><span class="line">    </span><br><span class="line">def main():</span><br><span class="line">    s &#x3D; socket.socket(socket.AF_INET, socket.SOCK_DGRAM)</span><br><span class="line">    # 绑定ip 端口</span><br><span class="line">    s.bind((&quot;&quot;, 7788))</span><br><span class="line">    while True:</span><br><span class="line">        # 发送</span><br><span class="line">        send_msg(s) </span><br><span class="line">        # 接收数据</span><br><span class="line">        recv_msg(s)</span><br><span class="line">if __name __ &#x3D;&#x3D; &#39;__main__&#39;:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure>

<h2 id="TCP通信模型"><a href="#TCP通信模型" class="headerlink" title="TCP通信模型"></a>TCP通信模型</h2><ul>
<li><p>udp通信模型<br>在通信开始前，不需要建立相关连接，<br>只需要发送数据即可，类似于生活中写信<br>udp发的消息可能丢失，不安全，简单   </p>
</li>
<li><p>tcp类似于打电话，稳定，面向连接</p>
</li>
</ul>
<h3 id="tcp模型简介"><a href="#tcp模型简介" class="headerlink" title="tcp模型简介"></a>tcp模型简介</h3><ul>
<li><p>1.通信双方必须先建立连接</p>
<ul>
<li>1.创建连接</li>
<li>2.数据传送</li>
<li>3.终止连接</li>
</ul>
</li>
<li><p>2.发送应答机制：<br>当主机发送数据之后，接收方会告诉主机是否接收到数据，（没收到会显示超时上传）<br>网购都是tcp，qq：tcp，抢票tcp。保证数据可靠</p>
</li>
<li><p>3.tcp严格区分服务器和客户端</p>
</li>
</ul>
<h3 id="tcp客户端构建流程"><a href="#tcp客户端构建流程" class="headerlink" title="tcp客户端构建流程"></a>tcp客户端构建流程</h3><ul>
<li>1.创建套接字</li>
<li>2.目的信息</li>
<li>3.链接服务器 多了这个</li>
<li>4.显示用户输入数据</li>
<li>5.接收对方发来数据<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">import socket</span><br><span class="line">def main():</span><br><span class="line">    # 1.创建tcp套接字</span><br><span class="line">    tcp_socket &#x3D; socket.socket(socket.AF_INET, socket.SOCK_STREAM)</span><br><span class="line">    # 2.链接服务器</span><br><span class="line">    server_ip &#x3D; input(&#39;请输入服务器的ip：&#39;)</span><br><span class="line">    server_port &#x3D; int(input(&quot;请输入服务器的port:&quot;))</span><br><span class="line">    server_addr &#x3D; (server_ip, server_port)</span><br><span class="line">    tcp_socket.connect(server_addr)</span><br><span class="line">    # 3.发送&#x2F;接收数据</span><br><span class="line">    send_data &#x3D; input(&#39;请输入要发送的数据:&#39;)</span><br><span class="line">    tcp_socket.send(send_data.encode(&#39;utf-8&#39;))</span><br><span class="line">    # 4.关闭套接字</span><br><span class="line">    tcp_socket.close()</span><br><span class="line"></span><br><span class="line">if __name__ &#x3D;&#x3D; &#39;__main__&#39;:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="tcp服务器创建流程"><a href="#tcp服务器创建流程" class="headerlink" title="tcp服务器创建流程"></a>tcp服务器创建流程</h3><ul>
<li>1.套接字</li>
<li>2.ip port</li>
<li>3.listen使套接字变为可以被动链接</li>
<li>4.accept等待客户端的链接</li>
<li>5.recv/send接收发送的数据<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">import socket</span><br><span class="line"># tcp服务器端</span><br><span class="line">def main():</span><br><span class="line">    # 1.买个手机（创建套接字）</span><br><span class="line">    tcp_server_socket &#x3D; socket.socket(socket.AF_INET, socket.SOCK_STREAM)</span><br><span class="line">    </span><br><span class="line">    # 2.拆入手机卡（绑定本地信息）</span><br><span class="line">    tcp_server_socket.bind((&quot;&quot;, 7890) )</span><br><span class="line">    </span><br><span class="line">    # 3.将手机设置为响铃（让默认套接字由主动变为被动）</span><br><span class="line">    tcp_server_socket.listen(128)</span><br><span class="line">    while True:</span><br><span class="line">        # 4.等待电话到来（等待客户端链接 accept）</span><br><span class="line">        print(&#39;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;1&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#39;)</span><br><span class="line">        client_socket, client_addr &#x3D; tcp_server_socket.accept()</span><br><span class="line">        print(&#39;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;2&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#39;)</span><br><span class="line">        print(&quot;一个新的客户端已经到来%s&quot; % str(client_addr))</span><br><span class="line">        while True:</span><br><span class="line">            #接收客户端发送的数据</span><br><span class="line">            try:</span><br><span class="line">                recv_data &#x3D; client_socket.recv(1024)</span><br><span class="line">            except:</span><br><span class="line">                break</span><br><span class="line">            # 客户端调用close或者发出退出信息</span><br><span class="line">            if str(recv_data.decode(&#39;utf-8&#39;)) &#x3D;&#x3D; &#39;退出&#39; or not recv_data:</span><br><span class="line">                break</span><br><span class="line">            print(&quot;客户端发送过来的请求是%s&quot; % str(recv_data.decode(&#39;utf-8&#39;)))</span><br><span class="line">            # 回送一部分数据给客户端</span><br><span class="line">            client_socket.send(&quot;shadiao&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;OK&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;shadiao&quot;.encode(&#39;utf-8&#39;))</span><br><span class="line"></span><br><span class="line">        # 关闭套接字</span><br><span class="line">        client_socket.close()</span><br><span class="line">        print(&#39;服务完毕&#39;)</span><br><span class="line">    tcp_server_socket.close()</span><br><span class="line">    </span><br><span class="line">if __name__ &#x3D;&#x3D; &#39;__main__&#39;:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="TCP文件下载器"><a href="#TCP文件下载器" class="headerlink" title="TCP文件下载器"></a>TCP文件下载器</h3><h4 id="服务器端"><a href="#服务器端" class="headerlink" title="服务器端"></a>服务器端</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">import socket</span><br><span class="line">def send_file_2_client(client_addr, client_socket):</span><br><span class="line">    while True:</span><br><span class="line">        # 接收客户端需要的文件名</span><br><span class="line">        try:</span><br><span class="line">            file_name &#x3D; client_socket.recv(1024)</span><br><span class="line">        except:</span><br><span class="line">            break</span><br><span class="line">        # 客户端调用close或者发出退出信息</span><br><span class="line">        if str(file_name.decode(&#39;utf-8&#39;)) &#x3D;&#x3D; &#39;退出&#39; or not file_name:</span><br><span class="line">            break</span><br><span class="line">        print(&quot;客户端(%s)需要的文件是:%s&quot; % (str(client_addr), </span><br><span class="line">        str(file_name.decode(&#39;utf-8&#39;))))</span><br><span class="line">        # 打开文件读取数据</span><br><span class="line">        file_content &#x3D; None</span><br><span class="line">        try:</span><br><span class="line">            f &#x3D; open(file_name, &#39;rb&#39;)</span><br><span class="line">            file_content &#x3D; f.read()</span><br><span class="line">            f.close()</span><br><span class="line">        except Exception as ret:</span><br><span class="line">            print(&quot;没有要下载的文件(%s)&quot; % file_name)</span><br><span class="line">        if file_content:</span><br><span class="line">            # 发送对应的数据给客户端</span><br><span class="line">            client_socket.send(file_content)</span><br><span class="line">            </span><br><span class="line">def main():</span><br><span class="line">    # 1.买个手机（创建套接字）</span><br><span class="line">    tcp_server_socket &#x3D; socket.socket(socket.AF_INET, socket.SOCK_STREAM)</span><br><span class="line">    </span><br><span class="line">    # 2.拆入手机卡（绑定本地信息）</span><br><span class="line">    tcp_server_socket.bind((&quot;&quot;, 7890) )</span><br><span class="line">    </span><br><span class="line">    # 3.将手机设置为响铃（让默认套接字由主动变为被动）</span><br><span class="line">    tcp_server_socket.listen(128)</span><br><span class="line">    while True:</span><br><span class="line">    # 4.等待电话到来（等待客户端链接 accept）</span><br><span class="line">        print(&#39;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;1&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#39;)</span><br><span class="line">        client_socket, client_addr &#x3D; tcp_server_socket.accept()</span><br><span class="line">        print(&#39;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;2&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#39;)</span><br><span class="line">        print(&quot;一个新的客户端已经到来%s&quot; % str(client_addr))</span><br><span class="line">        #调用发送文件函数为客户端服务</span><br><span class="line">        send_file_2_client(client_addr, client_socket)</span><br><span class="line">        # 关闭套接字</span><br><span class="line">        client_socket.close()</span><br><span class="line">    print(&#39;服务完毕&#39;)</span><br><span class="line">    tcp_server_socket.close()</span><br><span class="line">    </span><br><span class="line">if __name__ &#x3D;&#x3D; &#39;__main__&#39;:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure>

<h4 id="客户端"><a href="#客户端" class="headerlink" title="客户端"></a>客户端</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">from socket import *</span><br><span class="line">import sys</span><br><span class="line"></span><br><span class="line">def main():</span><br><span class="line">    tcp_client_socket &#x3D; socket(AF_INET, SOCK_STREAM)</span><br><span class="line">    server_ip &#x3D; input(&quot;请输入服务器ip:&quot;)</span><br><span class="line">    server_port &#x3D; int(input(&quot;请输入服务器port:&quot;))</span><br><span class="line"></span><br><span class="line">    tcp_client_socket.connect((server_ip, server_port))</span><br><span class="line"></span><br><span class="line">    file_name &#x3D; input(&quot;请输入要下载的文件名:&quot;)</span><br><span class="line"></span><br><span class="line">    tcp_client_socket.send(file_name.encode(&quot;utf-8&quot;))</span><br><span class="line"></span><br><span class="line">    recv_data &#x3D; tcp_client_socket.recv(1024)</span><br><span class="line">    if recv_data:</span><br><span class="line">        with open(&quot;[接收]&quot; + file_name, &quot;wb&quot;) as f:</span><br><span class="line">            f.write(recv_data)</span><br><span class="line"></span><br><span class="line">    tcp_client_socket.close()</span><br><span class="line"></span><br><span class="line">if __name__ &#x3D;&#x3D; &#39;__main__&#39;:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure>


<h3 id="简单TCP文件上传器"><a href="#简单TCP文件上传器" class="headerlink" title="简单TCP文件上传器"></a>简单TCP文件上传器</h3><h4 id="服务端"><a href="#服务端" class="headerlink" title="服务端"></a>服务端</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">import socket</span><br><span class="line"></span><br><span class="line">client &#x3D; socket.socket()</span><br><span class="line">client.connect((&#39;localhost&#39;, 9999))</span><br><span class="line"></span><br><span class="line">while True:</span><br><span class="line">    cmd &#x3D; input(&#39;file name &lt;&lt;:&#39;)</span><br><span class="line">    if len(cmd) &#x3D;&#x3D; 0:</span><br><span class="line">        continue</span><br><span class="line">    client.send(cmd.encode(&#39;utf-8&#39;))</span><br><span class="line">    server_size &#x3D; client.recv(1024).decode()</span><br><span class="line">    file_size &#x3D; 0</span><br><span class="line">    if server_size !&#x3D; &#39;0&#39;:</span><br><span class="line">        f &#x3D; open(&#39;2&#39;+cmd , &#39;wb&#39;)</span><br><span class="line">        while file_size &lt; int(server_size) :</span><br><span class="line">            print(file_size, server_size)</span><br><span class="line">            data &#x3D; client.recv(1024)</span><br><span class="line">            if data:</span><br><span class="line">                file_size +&#x3D; len(data)</span><br><span class="line">                f.write(data)</span><br><span class="line">            else:</span><br><span class="line">                print(&#39;err&#39;)</span><br><span class="line">                continue</span><br><span class="line">            # print(data)</span><br><span class="line">        f.close()</span><br><span class="line">        print(&#39;file over&#39;)</span><br></pre></td></tr></table></figure>

<h4 id="客户端-1"><a href="#客户端-1" class="headerlink" title="客户端"></a>客户端</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">import errno</span><br><span class="line">import selectors</span><br><span class="line">import socket</span><br><span class="line">import os, time</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def accept(sock, mask):</span><br><span class="line">    conn, addr &#x3D; sock.accept()</span><br><span class="line">    conn.setblocking(False)</span><br><span class="line">    sel.register(conn, selectors.EVENT_READ, read)</span><br><span class="line"></span><br><span class="line">def read(conn, mask):</span><br><span class="line">    file_name &#x3D; conn.recv(1024).decode()</span><br><span class="line">    if os.path.isfile(file_name):</span><br><span class="line">        file_size &#x3D; os.stat(file_name).st_size</span><br><span class="line">        conn.send(str(file_size).encode(&#39;utf-8&#39;))</span><br><span class="line">        print(file_size)</span><br><span class="line">        # print(conn.recv(1024))</span><br><span class="line">        with open(file_name, &#39;rb&#39;) as f:</span><br><span class="line">            for line in f:</span><br><span class="line">                if line !&#x3D; &#39;&#39;:</span><br><span class="line">                    print(line)</span><br><span class="line">                    conn.send(line)</span><br><span class="line">            print(&#39;over&#39;)</span><br><span class="line">    else:</span><br><span class="line">        conn.send(b&#39;0&#39;)</span><br><span class="line">if __name__ &#x3D;&#x3D; &#39;__main__&#39;:</span><br><span class="line">    sel &#x3D; selectors.DefaultSelector()</span><br><span class="line">    sock &#x3D; socket.socket()</span><br><span class="line">    sock.bind((&#39;localhost&#39;, 9999))</span><br><span class="line">    sock.listen()</span><br><span class="line">    sock.setblocking(False)</span><br><span class="line">    sel.register(sock, selectors.EVENT_READ, accept)</span><br><span class="line">    while True:</span><br><span class="line">        events &#x3D; sel.select()</span><br><span class="line">        for key, mask in events:</span><br><span class="line">            callaback &#x3D; key.data</span><br><span class="line">            callaback(key.fileobj, mask)</span><br></pre></td></tr></table></figure>

<h3 id="TCP注意点"><a href="#TCP注意点" class="headerlink" title="TCP注意点"></a>TCP注意点</h3><ul>
<li>1.tcp服务器一般情况下都需要绑定：否则客户端找不到服务器</li>
<li>2.客户端为什么不绑定？因为是主动连接服务器，所以只要确定<br>服务器ip，port信息就行，本地客户端随机就行，还可以多开</li>
<li>3.tcp通过lisent将套接字socket由主动变为被动，这是tcp服务<br>器必须要做的</li>
<li>4.当客户端需要链接服务器是，需要使用connect进行链接，而udp<br>不需要，tcp只要有链接成功才能通信</li>
<li>5.当tcp客户端链接服务器后，服务器会用一个新的套接字来标记客<br>户端，单独为此客户服务</li>
<li>6.listen后的套接字是被动套接字，专门用来接收客户端的链接请求，<br>而accept返回的新的套接字是标记这个客户端的服务</li>
<li>7.关闭listen后的套接字意味着被动套接字关闭了，会导致新的客户<br>端不能够链接服务器，但是之前链接成功的可以正常通信</li>
<li>8.关闭accept这个套接字意味着这个客户端服务完毕</li>
<li>9.当客户端套接字close，服务器端会recv解阻塞，并且返回recv长<br>度为0，因此服务器可以通过返回数据的长度来区别客户端是否已经下线</li>
</ul>
<h2 id="多线程"><a href="#多线程" class="headerlink" title="多线程"></a>多线程</h2><p>没有多任务就不能同时执行，单核cpu的时间片轮转<br>单核cpu只能同一时间执行一个任务，但只要够快，就像多线程一样</p>
<ul>
<li><p>并行：真的多任务</p>
</li>
<li><p>并发：假的多任务<br>任务数多于cpu的核数，就是并发</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">threading</span><br><span class="line">threading.enumerate()查看线程</span><br></pre></td></tr></table></figure>
<h3 id="两种方法调用线程"><a href="#两种方法调用线程" class="headerlink" title="两种方法调用线程"></a>两种方法调用线程</h3></li>
<li><p>1．直接调用函数名</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">t1 &#x3D; treading.Thread(target&#x3D;sing)</span><br><span class="line">t1.start（）</span><br></pre></td></tr></table></figure>
</li>
<li><p>2.创建类继承thread</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">class MyThread(threading.Thread): 必须继承threading</span><br><span class="line">		def run(self):	必须有run方法</span><br><span class="line">			&#x2F;…..</span><br><span class="line">t &#x3D; MyThread()</span><br><span class="line">t.start()这个start自动调用run</span><br><span class="line">多线程共享全局变量</span><br><span class="line">！！全局变量不一定要加global</span><br><span class="line">全局变量改了地址指向，需要global</span><br><span class="line">若[1, 2]列表append，指向地址未变，不需要global</span><br><span class="line">[1, 2] + [100, 200] 就变了</span><br><span class="line">指向地址变化用global，仅仅修改了指向空间中的数据</span><br><span class="line">不用global</span><br><span class="line"></span><br><span class="line">t1 &#x3D; treading.Thread(target&#x3D;sing， args&#x3D;(,))一定是一个元组</span><br><span class="line">target指定这个线程去哪个函数执行代码</span><br><span class="line">args指定调用函数的时候，传递什么数据过去</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="共享变量问题"><a href="#共享变量问题" class="headerlink" title="共享变量问题"></a>共享变量问题</h3><p>大家都用同一个变量，资源竞争，比如两个线程同时写一个变量<br>如果出现资源竞争，就会出错</p>
<ul>
<li>线程在执行如g_num += 1时，会分为三步:<ul>
<li>1.获取g_num的值</li>
<li>2.把获取的值+1</li>
<li>3.把第二步的结果存储到g_num中<br>当线程同时调用，g_num都是一起加，还没开始存储</li>
</ul>
</li>
</ul>
<ul>
<li><p>如何解决共享变量资源竞争的问题</p>
<ul>
<li><p>原子性：<br>我做的时候你不做，要么做完，要么不做</p>
</li>
<li><p>同步协调：<br>就像走路，一左一右协调行走</p>
</li>
<li><p>互斥锁X：<br>当多个线程同时修改一个数据时，需要进行同步控制<br>某个线程进行修改共享数据时，先将其锁定，此时资源锁定状态，<br>其他线程不可修改，直到该线程释放资源，将资源的状态变为非锁定。</p>
</li>
</ul>
</li>
<li><p>锁方案一  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">mutex &#x3D; threading.Lock()</span><br><span class="line">上锁</span><br><span class="line">mutex.acquire()</span><br><span class="line">释放锁</span><br><span class="line">mutex.release()</span><br><span class="line">import threading</span><br><span class="line">import time</span><br><span class="line"></span><br><span class="line">g_num &#x3D; 0</span><br><span class="line"></span><br><span class="line">def test1(num):</span><br><span class="line">    global g_num</span><br><span class="line">    # 上锁，若之前没上锁，上锁成功，若之前上锁了，会堵塞在这儿，直到这个锁被解开</span><br><span class="line">    mutex.acquire()</span><br><span class="line">    for i in range(num):</span><br><span class="line">        g_num +&#x3D; 1</span><br><span class="line">    # 解锁</span><br><span class="line">    mutex.release()</span><br><span class="line">    print(&quot;-------------in test1 g_num&#x3D;%d------&quot; % g_num)</span><br><span class="line"></span><br><span class="line">def test2(num):</span><br><span class="line">    global g_num</span><br><span class="line">    mutex.acquire()</span><br><span class="line">    for i in range(num):</span><br><span class="line">        g_num +&#x3D; 1</span><br><span class="line">    # 解锁</span><br><span class="line">    mutex.release()</span><br><span class="line">    print(&quot;-------------in test2 g_num&#x3D;%d------&quot; % g_num)</span><br><span class="line"></span><br><span class="line"># 创建一个互斥锁 默认未上锁</span><br><span class="line">mutex &#x3D; threading.Lock()</span><br><span class="line"></span><br><span class="line">def main():</span><br><span class="line">    t1 &#x3D; threading.Thread(target&#x3D;test1, args&#x3D;(1000000,))</span><br><span class="line">    t2 &#x3D; threading.Thread(target&#x3D;test2, args&#x3D;(1000000,))</span><br><span class="line">    t1.start()</span><br><span class="line">    t2.start()</span><br><span class="line">    time.sleep(2)</span><br><span class="line">    print(&quot;-------------in main Thread g_num&#x3D;%d------&quot; % g_num)</span><br><span class="line">    </span><br><span class="line">if __name__ &#x3D;&#x3D; &#39;__main__&#39;:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure>
</li>
<li><p>锁方案二<br>上锁的代码越少越好</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">import threading</span><br><span class="line">import time</span><br><span class="line"></span><br><span class="line">g_num &#x3D; 0</span><br><span class="line"></span><br><span class="line">def test1(num):</span><br><span class="line">    global g_num</span><br><span class="line">    # 上锁，若之前没上锁，上锁成功，若之前上锁了，会堵塞在这儿，直到这个锁被解开</span><br><span class="line">    mutex.acquire()</span><br><span class="line">    for i in range(num):</span><br><span class="line">        g_num +&#x3D; 1</span><br><span class="line">    # 解锁</span><br><span class="line">    mutex.release()</span><br><span class="line">    print(&quot;-------------in test1 g_num&#x3D;%d------&quot; % g_num)</span><br><span class="line"></span><br><span class="line">def test2(num):</span><br><span class="line">    global g_num</span><br><span class="line">    mutex.acquire()</span><br><span class="line">    for i in range(num):</span><br><span class="line">        g_num +&#x3D; 1</span><br><span class="line">    # 解锁</span><br><span class="line">    mutex.release()</span><br><span class="line">    print(&quot;-------------in test2 g_num&#x3D;%d------&quot; % g_num)</span><br><span class="line"></span><br><span class="line"># 创建一个互斥锁 默认未上锁</span><br><span class="line">mutex &#x3D; threading.Lock()</span><br><span class="line"></span><br><span class="line">def main():</span><br><span class="line">    t1 &#x3D; threading.Thread(target&#x3D;test1, args&#x3D;(1000000,))</span><br><span class="line">    t2 &#x3D; threading.Thread(target&#x3D;test2, args&#x3D;(1000000,))</span><br><span class="line">    t1.start()</span><br><span class="line">    t2.start()</span><br><span class="line">    time.sleep(1)</span><br><span class="line">    print(&quot;-------------in main Thread g_num&#x3D;%d------&quot; % g_num)</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">if __name__ &#x3D;&#x3D; &#39;__main__&#39;:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h4 id="互斥锁死锁问题"><a href="#互斥锁死锁问题" class="headerlink" title="互斥锁死锁问题"></a>互斥锁死锁问题</h4><p>如果两个线程分别占有一部分资源并且同时等待对方的资源，就会造成死锁。<br>如在线程A中acquireB 同时在B中acquireA就会出现死锁无法走动</p>
<ul>
<li><p>解决死锁：</p>
<ul>
<li>1.程序设计时尽量避免</li>
<li>2.添加超时时间</li>
</ul>
</li>
<li><p>银行家算法：<br>银行10单位，c1 9 c2 3 c3 8, 如何借款，先给c1 2, c2 2, c3 4<br>c2还钱 c3 4, c3还钱 c1 7</p>
</li>
</ul>

        </div>
        <footer class="article-footer">
            



    <a data-url="http://example.com/2021/06/18/python/socket/" data-id="ckqanhgwf008r28mzat5w66gg" class="article-share-link"><i class="fa fa-share"></i>分享到</a>
<script>
    (function ($) {
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

        </footer>
    </div>
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "BlogPosting",
        "author": {
            "@type": "Person",
            "name": "durian"
        },
        "headline": "socket",
        "image": "http://example.com/css/images/dangao.jpg",
        "keywords": "",
        "genre": "python",
        "datePublished": "2021-06-18",
        "dateCreated": "2021-06-18",
        "dateModified": "2021-06-16",
        "url": "http://example.com/2021/06/18/python/socket/",
        "description": "Ip地址分类Ip地址由网络地址和主机地址组成分为5类：

1.A类IP地址一个A类IP地址由1字节的网络地址和3字节主机地址组成，网络地址的最高位必须是“0”（位运算）， 地址范围从1.0.0.0 到126.0.0.0。可用的A类网络有126个，每个网络能容纳1千多万个主机。

2.B类IP地址一个B类IP地址由2个字节的网络地址和2个字节的主机地址组成，网络地址的最高位必须是“10”，地址范围从",
        "wordCount": 2817
    }
</script>

</article>

    <section id="comments">
    
        
    <!-- Valine -->
    <div class="vcomments"></div>


    
    </section>



                        </div>
                    </section>
                    <aside id="sidebar">
    <a class="sidebar-toggle" title="Expand Sidebar"><i class="toggle icon"></i></a>
    <div class="sidebar-top">
        <p>关注我 :</p>
        <ul class="social-links">
            
                
                <li>
                    <a class="social-tooltip" title="github" href="https://github.com/chunjianghuayueye2" target="_blank" rel="noopener">
                        <i class="icon fa fa-github"></i>
                    </a>
                </li>
                
            
        </ul>
    </div>
    
        
<nav id="article-nav">
    
        <a href="/2021/06/18/python/python%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/tuple%E8%A7%A3%E6%9E%90/" id="article-nav-newer" class="article-nav-link-wrap">
        <strong class="article-nav-caption">下一篇</strong>
        <p class="article-nav-title">
        
            tuple部分源码解析(cpython)
        
        </p>
        <i class="icon fa fa-chevron-right" id="icon-chevron-right"></i>
    </a>
    
    
        <a href="/2021/06/18/python/PEP8%E8%A7%84%E8%8C%83/" id="article-nav-older" class="article-nav-link-wrap">
        <strong class="article-nav-caption">上一篇</strong>
        <p class="article-nav-title">部分PEP8规范</p>
        <i class="icon fa fa-chevron-left" id="icon-chevron-left"></i>
        </a>
    
</nav>

    
    <div class="widgets-container">
        
            
                
<div class="widget-wrap widget-list">
    <h3 class="widget-title">目录</h3>
    <div class="widget">
        <div id="toc" class="toc-article">
            <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Ip%E5%9C%B0%E5%9D%80%E5%88%86%E7%B1%BB"><span class="toc-number">1.</span> <span class="toc-text">Ip地址分类</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%A7%81%E6%9C%89%E7%BD%91%E7%BB%9C"><span class="toc-number">2.</span> <span class="toc-text">私有网络</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Port%E7%AB%AF%E5%8F%A3"><span class="toc-number">3.</span> <span class="toc-text">Port端口</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Socket%E7%AE%80%E4%BB%8B"><span class="toc-number">4.</span> <span class="toc-text">Socket简介</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#socket%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8"><span class="toc-number">5.</span> <span class="toc-text">socket简单使用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#udp%E8%81%8A%E5%A4%A9%E5%99%A8"><span class="toc-number">6.</span> <span class="toc-text">udp聊天器</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#TCP%E9%80%9A%E4%BF%A1%E6%A8%A1%E5%9E%8B"><span class="toc-number">7.</span> <span class="toc-text">TCP通信模型</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#tcp%E6%A8%A1%E5%9E%8B%E7%AE%80%E4%BB%8B"><span class="toc-number">7.1.</span> <span class="toc-text">tcp模型简介</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#tcp%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%9E%84%E5%BB%BA%E6%B5%81%E7%A8%8B"><span class="toc-number">7.2.</span> <span class="toc-text">tcp客户端构建流程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#tcp%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%88%9B%E5%BB%BA%E6%B5%81%E7%A8%8B"><span class="toc-number">7.3.</span> <span class="toc-text">tcp服务器创建流程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#TCP%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD%E5%99%A8"><span class="toc-number">7.4.</span> <span class="toc-text">TCP文件下载器</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AB%AF"><span class="toc-number">7.4.1.</span> <span class="toc-text">服务器端</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%A2%E6%88%B7%E7%AB%AF"><span class="toc-number">7.4.2.</span> <span class="toc-text">客户端</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AE%80%E5%8D%95TCP%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E5%99%A8"><span class="toc-number">7.5.</span> <span class="toc-text">简单TCP文件上传器</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9C%8D%E5%8A%A1%E7%AB%AF"><span class="toc-number">7.5.1.</span> <span class="toc-text">服务端</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%A2%E6%88%B7%E7%AB%AF-1"><span class="toc-number">7.5.2.</span> <span class="toc-text">客户端</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#TCP%E6%B3%A8%E6%84%8F%E7%82%B9"><span class="toc-number">7.6.</span> <span class="toc-text">TCP注意点</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%9A%E7%BA%BF%E7%A8%8B"><span class="toc-number">8.</span> <span class="toc-text">多线程</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%A4%E7%A7%8D%E6%96%B9%E6%B3%95%E8%B0%83%E7%94%A8%E7%BA%BF%E7%A8%8B"><span class="toc-number">8.1.</span> <span class="toc-text">两种方法调用线程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B1%E4%BA%AB%E5%8F%98%E9%87%8F%E9%97%AE%E9%A2%98"><span class="toc-number">8.2.</span> <span class="toc-text">共享变量问题</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BA%92%E6%96%A5%E9%94%81%E6%AD%BB%E9%94%81%E9%97%AE%E9%A2%98"><span class="toc-number">8.2.1.</span> <span class="toc-text">互斥锁死锁问题</span></a></li></ol></li></ol></li></ol>
        </div>
    </div>
</div>


            
                
    <div class="widget-wrap">
        <h3 class="widget-title">最新文章</h3>
        <div class="widget">
            <ul id="recent-post" class="">
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2021/06/22/rabbitmq/%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE/" class="thumbnail">
    
    
        <span style="background-image:url(/css/images/chu3.jpg)" alt="安装配置" class="thumbnail-image"></span>
    
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/bigdata/">bigdata</a><i class="icon fa fa-angle-right"></i><a class="article-category-link" href="/categories/bigdata/rabbitmq/">rabbitmq</a></p>
                            <p class="item-title"><a href="/2021/06/22/rabbitmq/%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE/" class="title">安装配置</a></p>
                            <p class="item-date"><time datetime="2021-06-22T06:48:05.782Z" itemprop="datePublished">2021-06-22</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2021/06/18/python/%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B/" class="thumbnail">
    
    
        <span style="background-image:url(/css/images/saibo1.jpg)" alt="函数式编程" class="thumbnail-image"></span>
    
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/python/">python</a></p>
                            <p class="item-title"><a href="/2021/06/18/python/%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B/" class="title">函数式编程</a></p>
                            <p class="item-date"><time datetime="2021-06-18T01:03:51.525Z" itemprop="datePublished">2021-06-18</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2021/06/18/python/%E9%A1%B9%E7%9B%AE%E8%A7%A3%E6%9E%90/" class="thumbnail">
    
    
        <span style="background-image:url(/css/images/chu1.jpg)" alt="项目解析" class="thumbnail-image"></span>
    
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/webframe/">webframe</a></p>
                            <p class="item-title"><a href="/2021/06/18/python/%E9%A1%B9%E7%9B%AE%E8%A7%A3%E6%9E%90/" class="title">项目解析</a></p>
                            <p class="item-date"><time datetime="2021-06-18T01:03:51.525Z" itemprop="datePublished">2021-06-18</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2021/06/18/python/python%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/tuple%E8%A7%A3%E6%9E%90/" class="thumbnail">
    
    
        <span style="background-image:url(/css/images/bei.jpg)" alt="tuple部分源码解析(cpython)" class="thumbnail-image"></span>
    
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/python%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/">python源码解析</a></p>
                            <p class="item-title"><a href="/2021/06/18/python/python%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/tuple%E8%A7%A3%E6%9E%90/" class="title">tuple部分源码解析(cpython)</a></p>
                            <p class="item-date"><time datetime="2021-06-18T01:03:51.525Z" itemprop="datePublished">2021-06-18</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2021/06/18/python/socket/" class="thumbnail">
    
    
        <span style="background-image:url(/css/images/dangao.jpg)" alt="socket" class="thumbnail-image"></span>
    
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/python/">python</a></p>
                            <p class="item-title"><a href="/2021/06/18/python/socket/" class="title">socket</a></p>
                            <p class="item-date"><time datetime="2021-06-18T01:03:51.525Z" itemprop="datePublished">2021-06-18</time></p>
                        </div>
                    </li>
                
            </ul>
        </div>
    </div>

            
                
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">分类</h3>
        <div class="widget">
            <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/bigdata/">bigdata</a><span class="category-list-count">22</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/bigdata/docker/">docker</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/bigdata/docker-compose/">docker-compose</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/bigdata/hadoop/">hadoop</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/bigdata/rabbitmq/">rabbitmq</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/bigdata/zookeeper/">zookeeper</a><span class="category-list-count">5</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/nosql/">nosql</a><span class="category-list-count">27</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/nosql/mysql%E9%AB%98%E7%BA%A7%E7%AF%87/">mysql高级篇</a><span class="category-list-count">14</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/nosql/redis/">redis</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/nosql/redis%E9%AB%98%E7%BA%A7%E7%AF%87/">redis高级篇</a><span class="category-list-count">9</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/python/">python</a><span class="category-list-count">8</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/python/cpython%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/">cpython源码解析</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/python/pyside2/">pyside2</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/python%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/">python源码解析</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/webframe/">webframe</a><span class="category-list-count">23</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/webframe/django/">django</a><span class="category-list-count">10</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/webframe/flask/">flask</a><span class="category-list-count">5</span></li></ul></li></ul>
        </div>
    </div>


            
                
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">归档</h3>
        <div class="widget">
            <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/06/">六月 2021</a><span class="archive-list-count">84</span></li></ul>
        </div>
    </div>


            
                

            
                

            
                
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">链接</h3>
        <div class="widget">
            <ul>
                
                    <li>
                        <a target="_blank" rel="noopener" href="http://hexo.io">Hexo</a>
                    </li>
                
            </ul>
        </div>
    </div>


            
        
    </div>
</aside>

                </div>
            </div>
        </div>
        <footer id="footer">
    <div class="container">
        <div class="container-inner">
        <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
            <a id="back-to-top" href="javascript:;"><i class="icon fa fa-angle-up"></i></a>
            <div class="credit">
                <h1 class="logo-wrap">
                    <a href="/" class="logo"></a>
                </h1>
                <p>&copy; 2021 durian</p>
                
                <p>Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>. Theme by <a href="https://github.com/ppoffice" target="_blank">PPOffice</a></p>
                
		<p><span id="busuanzi_container_site_pv">本站总访问量&nbsp;<span id="busuanzi_value_site_pv"></span>&nbsp;次</span></p>
                <p><span id="busuanzi_container_site_uv"> 
                     本站访客数&nbsp;<span id="busuanzi_value_site_uv"></span>&nbsp;人次
               </span></p>
            </div>
            <div class="footer-plugins">
              
    


            </div>
        </div>
    </div>
    <script src="//cdn1.lncld.net/static/js/2.5.0/av-min.js"></script>
</footer>

    </div>
    
    
    <script src="//unpkg.com/valine"></script>
    <script>
        var GUEST = ['nick','mail','link'];
        var meta = '';
        meta = meta.split(',').filter(function (item) {
            return GUEST.indexOf(item)>-1;
        });
        var avatarcdn = 'gravatar.cat.net' == true;
        new Valine({
            el: '.vcomments',
            notify: "false",
            verify: "false",
            appId: "795P9DunI2Jv3Jho36dlueIS-gzGzoHsz",
            appKey: "pM151YCVhYBYTB9Pt1SRuiKs",
            placeholder: "Just Do It",
            avatar:"mm",
            recordIP:"false",
            visitor: "true"
        });
    </script>





    
        
<script src="/libs/lightgallery/js/lightgallery.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-thumbnail.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-pager.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-autoplay.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-fullscreen.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-zoom.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-hash.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-share.min.js"></script>

        
<script src="/libs/lightgallery/js/lg-video.min.js"></script>

    
    
        
<script src="/libs/justified-gallery/jquery.justifiedGallery.min.js"></script>

    
    

    
    
    



<!-- Custom Scripts -->

<script src="/js/main.js"></script>


</body>
</html>
